<!DOCTYPE html>
<html>
  <head>
    <title>List</title>
    <meta content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="../resources/styles/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="../resources/scripts/bootstrap.min.js"></script>
    <script src="../resources/scripts/jquery.js"></script>
    <script src="../resources/scripts/jquery.loadTemplate-1.3.2.min.js"></script>
    
    
    
    <style>
    body{
       margin-bottom: 40px;
    }
    </style>
    <script>
    
    
    $(function(){
    	
    	var prmstr = window.location.search.substr(1);
        var prmarr = prmstr.split ("&");
        var params = {};

        for ( var i = 0; i < prmarr.length; i++) {
            var tmparr = prmarr[i].split("=");
            params[tmparr[0]] = tmparr[1];
        }
        
    	//alert(params['id']);
    	
    	getThreads(params['id'],1);
    	
    	function getThreads(id,pageNum){
    		    		
    		var url="/SelfCareCommunity/service/category/"+id+"/threads/page/"+pageNum;

    		$.ajax({
    			url: url,
    			type: "get",
    			dataType: "json",
    			success: function(result){    					
    				data=result.data;
    				for(var i=0;i<data.length;i++){
    			
    					var id=data[i].id;
    					var author=data[i].author.name;
    					var displayName=data[i].displayName;
    					var postNum=10;
    			
    					$("#threadList").append("<tr id='thread"+id+"'></tr>");
    					$("#thread"+id).loadTemplate("template/thread.html",
    					{
	    					author: author,
	    					url: "/SelfCareCommunity/content/view.html?id="+id,
	    					displayName:displayName,
	    					postNum:postNum
    					});
    			}			
    			}
    			});
    	}
   
	});

   </script>

 </head>
 <body>

   <div class="navbar">
  	<div class="navbar-inner">
    <a class="brand" href="#">SelfCareCommunity</a>
    <ul class="nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
    </ul>
  </div>
</div>


<div id="container" class="span9 offset3">

<h3>Category1</h3>

<table class="table table-hover">
   <thead>
    <tr>
    </tr>
  </thead>
  <tbody id="threadList">
  </tbody>
</table>

</div>

 </body>
</html>