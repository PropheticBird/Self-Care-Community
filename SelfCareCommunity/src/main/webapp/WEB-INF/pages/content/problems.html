<!DOCTYPE html>
<html>
<head>
<title>Problems &amp; Solutions</title>
<meta content="width=device-width, initial-scale=1.0">
<!-- Bootstrap -->
<meta content="width=device-width, initial-scale=1.0">
<link href="../resources/styles/bootstrap.min.css" rel="stylesheet"
	media="screen">
<script src="../resources/scripts/bootstrap.min.js"></script>
<script src="../resources/scripts/jquery.js"></script>
<script src="../resources/scripts/jquery.loadTemplate-1.3.2.min.js"></script>

<script>
	$(function() {
		var array;

		function composeUrl() {
			var relativePath = "/SelfCareCommunity/service/problems";
			var arr = window.location.href.split("/");
			var hostName = arr[0] + "//" + arr[2];
			return hostName + relativePath;
		}
		var data = [];
		var url = composeUrl();
		console.log("Path: " + url);
		$.ajax({
			url : url,
			type : "get",
			dataType : "json",
			success : function(result) {
				data = result;

				console.log("Lenght: "+data.length);
				$("#row-body").html("");

				for (var i = 0; i < data.length; i++) {
					$("#row-body").append("<div id='row"+i+"'></div>");
					var topic= "<a href='http://localhost:8080/SelfCareCommunity/content/solutionView.html'>Problem</a>"; 
					var whenVar = data[i].postedDate;
					var descVar = data[i].description;
					
					if(topic == null)
						topic = "Problem";
					else if(whenVar == null)
						whenVar = "When";
					else
						descVar = "Description";
					
					
					$("#row" + i).append("<h3 style='margin-bottom: -10px;'>" + topic + "</h3><br><h4 style='margin-top: 0px;'>"+whenVar+"</h4><h4 style='margin-top: 0px;'>"+descVar+"</h4><hr/>");
				}
			}

		});

	});
</script>
</head>
<div id="new-header">
	<script>
		$("#new-header").load("header.html");
	</script>
</div>
<body>

	<div id="container" >
		<div class="row">
			<div class="span9 offset4">
				<h3>Problems &amp; Solutions</h3>
				<div class="row">
					<div class="span8">
						<hr/>
						<div id="row-body"></div>
					</div>
				</div>
			</div>
		</div>

		<div class="buttons">
			<div class="span9 offset4">
				<div class="row">
					<div class="span8">
						<div class="row">
							<button id="btnProblem" class="btn btn-info" onclick="window.location.href='problemForm.html?id=11'">Post
								Problem</button>
							<button id="btnAnswer" class="btn btn-info" onclick="window.location.href='solutionForm.html?id=11'">Post
								Solution</button>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
</body>
</html>